define("taurus/autocomplete/1.1.0/autocomplete",[],function(e){return function(e){(function(t){t.fn.extend({AutoComplete:function(e){return this.each(function(){if(!this||this.tagName!=="INPUT"||this.type!=="text")return;this.controller?this.controller.setOption(e):t.isPlainObject(e)&&(this.controller=new n(this,e))})}});var n=function(e,n){this.option=t.extend(!1,{width:320,maxHeight:null,itemHeight:null,listStyle:"normal",listDirection:"down",data:[],ajaxDataType:"json",ajaxParams:{},ajaxTimeout:3e3,ajaxType:"GET",maxItems:20,matchHandler:v,emphasisHandler:m,createItemHandler:null,async:!1,emphasis:!0,onerror:null},n),r.apply(this,[e]),i.apply(this)},r=function(e){var n=this;this.inputView=t(e),this.inputView.attr("autocomplete","off").keyup(this._keyup=function(e){switch(e.keyCode){case 13:case 16:case 17:case 37:case 38:case 39:case 40:break;case 27:f.apply(n);break;default:n.option.async?setTimeout(function(){p.apply(n)},0):p.apply(n)}}).keydown(this._keydown=function(e){switch(e.keyCode){case 38:l.apply(n,["up"]);break;case 40:l.apply(n,["down"]);break;case 13:var t=n.searchView.is(":visible");c.apply(n);if(t)return!1}}).blur(this._blur=function(){t(document).one("click",function(){f.apply(n)})})},i=function(){var e=this;this.searchView=t("<div class='ac'><ul></ul></div>").appendTo(document.body).on("mouseenter","li",function(){e.searchView.find("li.selected").removeClass("selected"),t(this).addClass("selected")}).on("mouseleave","li",function(){t(this).removeClass("selected")}).on("click","li",function(){c.apply(e),f.apply(e)}).css("font-size",this.inputView.css("font-size")),t(window).resize(function(){o.apply(e)})},s=function(e){var n=this,r=this.searchView.find("ul").empty();if(t.inArray(this.option.listStyle,["normal","iconList","custom"])==-1)throw["遇到未知的listStyle参数！"];t.each(e,function(e,i){var s=t("<li><div></div></li>").appendTo(r).addClass(n.option.listStyle).attr("val",i.value).find("div");switch(n.option.listStyle){case"normal":s.append("<span>"+i.label+"</span>");break;case"iconList":var o=t("<img></img>").attr("src",i.image);s.append(t("<div></div>").append(o)).append("<span>"+i.label+"</span>");break;case"custom":s.append(n.option.createItemHandler.apply(n,[e,i]));case"default":}n.option.itemHeight>0&&s.height(n.option.itemHeight).css("max-height",n.option.itemHeight)})},o=function(){if(this.option.listDirection==="down")var e=this.inputView.offset().top+this.inputView.outerHeight();else{if(this.option.listDirection!=="up")throw"遇到未知的listDirection参数！";var e=this.inputView.offset().top-this.searchView.outerHeight()}var t=this.inputView.offset().left;this.searchView.css("top",e+"px").css("left",t+"px")},u=function(){if(typeof this.option.width=="string"&&this.option.width.toLowerCase()==="auto")return this.inputView.outerWidth()-2;if(typeof this.option.width=="number")return this.option.width;throw"遇到未知的width参数！"},a=function(e){var t=this;this.option.listDirection==="up"&&(e=e.reverse());try{s.apply(t,[e]),this.option.maxHeight>0&&(this.searchView.css("max-height",this.option.maxHeight+"px"),navigator.appName=="Microsoft Internet Explorer"&&this.searchView.css("height",this.searchView.height()>this.option.maxHeight?this.option.maxHeight+"px":"auto")),o.apply(this),this.searchView.css("width",u.apply(this)+"px")}catch(n){d.apply(this,[n+""]);return}this.searchView.show(),l.apply(this,[this.option.listDirection])},f=function(){this.searchView.find("ul").empty(),this.searchView.hide()},l=function(e){var t=this.searchView.find("li.selected");if(t.size())var n=e==="up"?t.prev():t.next();else var n=e==="up"?this.searchView.find("li").last():this.searchView.find("li").first();if(n.size()){this.searchView.find("li").removeClass("selected"),n.addClass("selected");var r=n.outerHeight(),i=n.position().top;r+i>this.searchView.height()?this.searchView.scrollTop(this.searchView.scrollTop()+i+r-this.searchView.height()):i<0&&this.searchView.scrollTop(this.searchView.scrollTop()+i)}},c=function(){var e=this.searchView.find("li.selected");e.size()&&(this.inputView.val(e.attr("val")),f.apply(this))},h=function(n){e.support.cors=!0;var r=this,i=[],s={async:!1,dataType:r.option.ajaxDataType,type:r.option.ajaxType,timeout:this.option.ajaxTimeout,success:function(e,n,s){if(r.option.ajaxDataType==="xml")t(e).find("item").each(function(){var e={value:t(this).text(),label:t(this).text()};for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n].nodeName,s=this.attributes[n].nodeValue;e[r]=s}i.push(e)});else{if(r.option.ajaxDataType!=="json")throw"遇到未知的ajaxDataType参数！";i=e}},error:function(e,t,n){throw n}};if(t.isPlainObject(this.option.ajaxParams))s.data=t.extend(!1,{keyword:n},this.option.ajaxParams);else if(t.isFunction(this.option.ajaxParams))s.data=t.extend(!1,{keyword:n},this.option.ajaxParams.apply(this,[n]));else{if(typeof this.option.ajaxParams!="string")throw"遇到未知的ajaxParams参数！";s.data="keyword="+n+"&"+this.option.ajaxParams}return t.ajax(this.option.data,s),i},p=function(){var e=this,n=this.inputView.val(),r=[],i=[];if(t.trim(n).length==0){f.apply(e);return}if(t.isArray(this.option.data))r=this.option.data;else if(t.isFunction(this.option.data))r=this.option.data.apply(this,[n]);else{if(typeof this.option.data!="string"){d.apply(this,["遇到未知的data参数！"]);return}try{r=h.apply(this,[n])}catch(s){d.apply(this,["Ajax错误:"+s]);return}}t.each(r,function(r,s){if(e.option.maxItems>0&&i.length>=e.option.maxItems)return!1;if(t.isPlainObject(s))var o=t.extend(!1,{},s);else{if(typeof s!="string")return d.apply(e,["数据源Item类型错误！"]),!1;var o={label:s,value:s,image:s}}e.option.matchHandler.apply(e,[n,o])&&i.push(o)}),n==this.inputView.val()&&(i.length>0?a.apply(this,[i]):f.apply(this))},d=function(e){t.isFunction(this.option.onerror)&&this.option.onerror.apply(this,[e])};n.prototype.setOption=function(e){if(t.isPlainObject(e))this.option=t.extend(!1,this.option,e);else{if(typeof e!="string"){d.apply(this,["未知的AutoComplete参数类型！"]);return}switch(e){case"destroy":this.destroy();break;case"show":this.show();break;default:d.apply(this,["未知的AutoComplete参数！"]);return}}},n.prototype.destroy=function(){this.searchView.remove(),this.inputView.unbind("keyup",this._keyup).unbind("keydown",this._keydown).unbind("blur",this._blur),delete this.inputView.get(0).controller},n.prototype.show=function(){this.option.async?setTimeout(function(){p.apply(this)},0):p.apply(this)};var v=function(e,n){var r=RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"i");return this.option.emphasis&&t.isFunction(this.option.emphasisHandler)&&this.option.emphasisHandler.apply(this,[e,n]),r.test(n.value)},m=function(e,t){var n=RegExp("("+e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")+")","ig");t.label=t.label.replace(n,"<em>$1</em>")}})(e)}});