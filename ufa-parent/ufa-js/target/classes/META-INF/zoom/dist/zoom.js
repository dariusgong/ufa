define("taurus/zoom/1.0.2/zoom",[],function(require){return function($){function format(e){for(var t=1;t<arguments.length;t++)e=e.replace("%"+(t-1),arguments[t]);return e}function CloudZoom(e,t){var n=$("img",e),r,i,s=null,o=null,u=null,a=null,f=null,l=null,c,h=0,p,d,v=0,m=0,g=0,y=0,b=0,w,E,S=this,x;setTimeout(function(){if(o===null){var t=e.width();e.parent().append(format('<div style="width:%0px;position:absolute;top:75%;left:%1px;text-align:center" class="cloud-zoom-loading" >Loading...</div>',t/3,t/2-t/6)).find(":last").css("opacity",.5)}},200);var T=function(){l!==null&&(l.remove(),l=null)};this.removeBits=function(){u&&(u.remove(),u=null),a&&(a.remove(),a=null),f&&(f.remove(),f=null),T(),$(".cloud-zoom-loading",e.parent()).remove()},this.destroy=function(){e.data("zoom",null),o&&(o.unbind(),o.remove(),o=null),s&&(s.remove(),s=null),this.removeBits()},this.fadedOut=function(){s&&(s.remove(),s=null),this.removeBits()},this.controlLoop=function(){if(u){var e=w-n.offset().left-p*.5>>0,r=E-n.offset().top-d*.5>>0;e<0?e=0:e>n.outerWidth()-p&&(e=n.outerWidth()-p),r<0?r=0:r>n.outerHeight()-d&&(r=n.outerHeight()-d),u.css({left:e,top:r}),u.css("background-position",-e+"px "+ -r+"px"),v=e/n.outerWidth()*c.width>>0,m=r/n.outerHeight()*c.height>>0,y+=(v-y)/t.smoothMove,g+=(m-g)/t.smoothMove,s.css("background-position",-(y>>0)+"px "+(-(g>>0)+"px"))}h=setTimeout(function(){S.controlLoop()},30)},this.init2=function(e,t){b++,t===1&&(c=e),b===2&&this.init()},this.init=function(){$(".cloud-zoom-loading",e.parent()).remove(),o=e.parent().append(format("<div class='mousetrap' style='background-image:url(\".\");z-index:999;position:absolute;width:%0px;height:%1px;left:%2px;top:%3px;'></div>",n.outerWidth(),n.outerHeight(),0,0)).find(":last"),o.bind("mousemove",this,function(e){w=e.pageX,E=e.pageY}),o.bind("mouseleave",this,function(e){return clearTimeout(h),u&&u.fadeOut(299),a&&a.fadeOut(299),f&&f.fadeOut(299),s.fadeOut(300,function(){S.fadedOut()}),!1}),o.bind("mouseenter",this,function(r){w=r.pageX,E=r.pageY,x=r.data,s&&(s.stop(!0,!1),s.remove());var i=t.adjustX,h=t.adjustY,v=n.outerWidth(),m=n.outerHeight(),g=t.zoomWidth,y=t.zoomHeight;t.zoomWidth=="auto"&&(g=v),t.zoomHeight=="auto"&&(y=m);var b=e.parent();switch(t.position){case"top":h-=y;break;case"right":i+=v;break;case"bottom":h+=m;break;case"left":i-=g;break;case"inside":g=v,y=m;break;default:b=$("#"+t.position),b.length?(g=b.innerWidth(),y=b.innerHeight()):(b=e,i+=v,h+=m)}s=b.append(format('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none;position:absolute;left:%0px;top:%1px;width:%2px;height:%3px;background-image:url(\'%4\');z-index:99;"></div>',i,h,g,y,c.src)).find(":last"),n.attr("title")&&t.showTitle&&s.append(format('<div class="cloud-zoom-title">%0</div>',n.attr("title"))).find(":last").css("opacity",t.titleOpacity),navigator.appName=="Microsoft Internet Explorer"&&/msie 6\.0/i.test(navigator.userAgent)&&(l=$('<iframe frameborder="0" src="#"></iframe>').css({position:"absolute",left:i,top:h,zIndex:99,width:g,height:y}).insertBefore(s)),s.fadeIn(500),u&&(u.remove(),u=null),p=n.outerWidth()/c.width*s.width(),d=n.outerHeight()/c.height*s.height(),u=e.append(format("<div class = 'cloud-zoom-lens' style='display:none;z-index:98;position:absolute;width:%0px;height:%1px;'></div>",p,d)).find(":last"),o.css("cursor",u.css("cursor"));var S=!1;t.tint&&(u.css("background",'url("'+n.attr("src")+'")'),a=e.append(format('<div style="display:none;position:absolute; left:0px; top:0px; width:%0px; height:%1px; background-color:%2;" />',n.outerWidth(),n.outerHeight(),t.tint)).find(":last"),a.css("opacity",t.tintOpacity),S=!0,a.fadeIn(500)),t.softFocus&&(u.css("background",'url("'+n.attr("src")+'")'),f=e.append(format('<div style="position:absolute;display:none;top:2px; left:2px; width:%0px; height:%1px;" />',n.outerWidth()-2,n.outerHeight()-2,t.tint)).find(":last"),f.css("background",'url("'+n.attr("src")+'")'),f.css("opacity",.5),S=!0,f.fadeIn(500)),S||u.css("opacity",t.lensOpacity),t.position!=="inside"&&u.fadeIn(500),x.controlLoop();return})},r=new Image,$(r).load(function(){S.init2(this,0)}),r.src=n.attr("src"),i=new Image,$(i).load(function(){S.init2(this,1)}),i.src=e.attr("href")}$.fn.CloudZoom=function(options){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}return this.each(function(){var relOpts,opts;eval("var	a = {"+$(this).attr("rel")+"}"),relOpts=a,$(this).is(".cloud-zoom")?($(this).css({position:"relative",display:"block"}),$("img",$(this)).css({display:"block"}),$(this).parent().attr("id")!="wrap"&&$(this).wrap('<div id="wrap" style="top:0px;z-index:9999;position:relative;"></div>'),opts=$.extend({},$.fn.CloudZoom.defaults,options),opts=$.extend({},opts,relOpts),$(this).data("zoom",new CloudZoom($(this),opts))):$(this).is(".cloud-zoom-gallery")&&(opts=$.extend({},relOpts,options),$(this).data("relOpts",opts),$(this).bind("click",$(this),function(e){var t=e.data.data("relOpts");return $("#"+t.useZoom).data("zoom").destroy(),$("#"+t.useZoom).attr("href",e.data.attr("href")),$("#"+t.useZoom+" img").attr("src",e.data.data("relOpts").smallImage),$("#"+e.data.data("relOpts").useZoom).CloudZoom(),!1}))}),this},$.fn.CloudZoom.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:!1,tintOpacity:.5,lensOpacity:.5,softFocus:!1,smoothMove:3,showTitle:!0,titleOpacity:.5,adjustX:0,adjustY:0}}});